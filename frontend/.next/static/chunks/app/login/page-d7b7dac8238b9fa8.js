(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4739:function(t,e,n){Promise.resolve().then(n.bind(n,4338))},4338:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=n(3827),o=n(4090),i=n(7907),a=n(4175),s=n(9079);function c(){let t=(0,i.useRouter)(),[e,n]=(0,o.useState)(""),[c,u]=(0,o.useState)(""),[l,d]=(0,o.useState)(!0),[f,h]=(0,o.useState)(""),g=async n=>{n.preventDefault(),h("");try{let n=JSON.stringify({email:e,password:c}),r=await fetch("".concat(s.env.NEXT_PUBLIC_API_URL||"http://localhost:8000").concat(l?"/api/auth/login":"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:n});if(!r.ok){let t=await r.json().then(t=>t.detail).catch(()=>"Authentication failed");throw Error(t)}if(l){let e=await r.json();(0,a.o4)(e.access_token),t.push("/")}else d(!0),h("Registration successful! Please sign in.")}catch(t){h(t.message)}};return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded shadow-md dark:bg-gray-800",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white",children:l?"Sign in to your account":"Create a new account"}),f&&(0,r.jsx)("div",{className:"p-3 text-sm rounded ".concat(f.includes("successful")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:f}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),(0,r.jsx)("input",{type:"email",required:!0,value:e,onChange:t=>n(t.target.value),className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),(0,r.jsx)("input",{type:"password",required:!0,value:c,onChange:t=>u(t.target.value),className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:l?"Sign In":"Sign Up"})]}),(0,r.jsx)("div",{className:"text-sm text-center",children:(0,r.jsx)("button",{onClick:()=>{d(!l),h("")},className:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",children:l?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})}},826:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});let r=n(9079).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function o(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={"Content-Type":"application/json",...(e=localStorage.getItem("token"))?{Authorization:"Bearer ".concat(e)}:{},...n.headers},i=await fetch("".concat(r).concat(t),{...n,headers:o});if(401===i.status)throw localStorage.removeItem("token"),window.location.href="/login",Error("Unauthorized");if(!i.ok)throw Error(await i.text()||"API Error: ".concat(i.statusText));return i.json()}},4175:function(t,e,n){"use strict";n.d(e,{kS:function(){return a},o4:function(){return o},ts:function(){return s}});var r=n(826);let o=t=>{localStorage.setItem("token",t)},i=()=>{localStorage.removeItem("token")},a=()=>{i(),window.location.href="/login"};async function s(){try{return await (0,r.S)("/api/auth/me")}catch(t){return null}}},7907:function(t,e,n){"use strict";var r=n(5313);n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}})},9079:function(t,e,n){"use strict";var r,o;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(3127)},3127:function(t){"use strict";!function(){var e={229:function(t){var e,n,r,o=t.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c=[],u=!1,l=-1;function d(){u&&r&&(u=!1,r.length?c=r.concat(c):l=-1,c.length&&f())}function f(){if(!u){var t=s(d);u=!0;for(var e=c.length;e;){for(r=c,c=[];++l<e;)r&&r[l].run();l=-1,e=c.length}r=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||u||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}},a=!0;try{e[t](i,i.exports,r),a=!1}finally{a&&delete n[t]}return i.exports}r.ab="//";var o=r(229);t.exports=o}()}},function(t){t.O(0,[971,69,744],function(){return t(t.s=4739)}),_N_E=t.O()}]);